
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Member Profile</title>

<!-- Bootstrap 5 CDN -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
/* ---------- Card Base ---------- */
.card {
  background: white;
  border: 1px solid #e5e7eb;
  border-radius: 12px;
  padding: 24px;
  margin: 40px auto;
  max-width: 100%;
  box-shadow: 0 4px 10px rgba(0,0,0,0.05);
}

/* ---------- Buttons ---------- */
.btn {
  padding: 10px 18px;
  background: #2563eb;
  color: white;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  font-weight: 500;
  transition: background 0.2s;
  margin-top: 12px;
}
.btn:hover { background: #1e40af; }

/* ---------- Member Info ---------- */
.playlist-tile {
  background: #fff;
  border: 1px solid #e5e7eb;
  border-radius: 12px;
  padding: 18px 22px;
  display: flex;
  flex-direction: column;
  gap: 6px;
}
.playlist-tile h3 {
  margin: 0 0 10px;
  font-size: 20px;
  color: #111;
}
.playlist-tile p {
  margin: 4px 0;
  font-size: 15px;
  color: #374151;
}

/* ---------- Badges ---------- */
.badge-green {
  display:inline-block;
  background:#dcfce7;
  color:#166534;
  font-weight:bold;
  padding:4px 10px;
  border-radius:6px;
  font-size:13px;
  margin-top:6px;
}
.badge-red {
  display:inline-block;
  background:#fee2e2;
  color:#991b1b;
  font-weight:bold;
  padding:4px 10px;
  border-radius:6px;
  font-size:13px;
  margin-top:6px;
}

/* ---------- Header ---------- */
.page-header {
  text-align: center;
  margin-top: 30px;
}
.page-header h1 {
  color: #2563eb;
  font-size: 24px;
  margin-bottom: 10px;
}
.page-header p {
  color: #555;
  font-size: 15px;
}
</style>

<!-- NAVBAR -->
<nav class="navbar navbar-expand-lg">
  <div class="container" style="
    border: 1px solid #e5e7eb;
    border-radius: 12px;
    padding: 20px;
    margin: 20px auto;">
    <a class="navbar-brand" href="#"><img src="images/logo.png" width="50" alt="YT Promotion"></a>

    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navMenu">
      <span class="navbar-toggler-icon"></span>
    </button>

   <div class="collapse navbar-collapse" id="navMenu">
      <ul class="navbar-nav me-auto mb-2">
        <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
        <li class="nav-item"><a class="nav-link" href="startwork.html">Start Work</a></li>
        <li class="nav-item"><a class="nav-link" href="membersworking.html">Members Working</a></li>
        <li class="nav-item"><a class="nav-link" href="howtowork.html">How To Work</a></li>
        <li class="nav-item"><a class="nav-link" href="QandA.html">Q&A</a></li>
      </ul>
      <!-- User Icon -->
  <a href="profile.html" class="me-3">
    <i class="bi bi-person-circle" style="font-size: 28px;"></i>
  </a>
    </div>
  </div>
</nav>

<div class="page-header">
  <h1>ðŸ‘¤ Your WaveGroupYT Account</h1>
  <p>View your channel details and manage your account.</p>
</div>

<!-- ---------- Member Info Card ---------- -->
<div id="memberInfoContainer" class="container my-2" style="width: 100%;">
  <p style="color:#555;">Loading your info...</p>
</div>

<!-- ---------- Buttons Section ---------- -->
<div style="text-align:center;">
  <button class="btn" id="logoutBtn" style="display:none;">ðŸšª Logout</button>
  <button class="btn" id="loginBtn" style="display:none;">ðŸ”‘ Login / Register</button>
</div>

<script>
// ---------- CONFIG ----------
const MEMBER_INFO_URL = "https://script.google.com/macros/s/AKfycbwVfpdWRxswag1qJG6Hdjx0qE-ZE02QInbObJMnOMMW_88pihRGLDXB4IJOgP5Mq06N/exec";
const HOME_URL = "https://youtubewatchtimegroup.blogspot.com/";
const LOGIN_URL = "https://youtubewatchtimegroup.blogspot.com/p/login-or-register.html";

// ---------- Load Member Info ----------
window.onload = function() {
  const handle = localStorage.getItem('channelHandle');
  const container = document.getElementById('memberInfoContainer');
  const logoutBtn = document.getElementById('logoutBtn');
  const loginBtn = document.getElementById('loginBtn');

  // ðŸŸ  If not logged in â†’ show Login button
  if (!handle) {
    container.innerHTML = "<p style='color:red;'>No user found. Please log in below.</p>";
    loginBtn.style.display = "inline-block";
    return;
  }

  // ðŸŸ¢ If logged in â†’ show Logout button
  logoutBtn.style.display = "inline-block";
  container.innerHTML = "<p style='color:#555;'>Fetching member info...</p>";

  fetch(`${MEMBER_INFO_URL}?handle=${encodeURIComponent(handle)}`)
    .then(res => res.json())
    .then(data => {
      if (!data || !data.Username) {
        container.innerHTML = "<p style='color:red;'>No record found for this handle.</p>";
        return;
      }

      let promotionHTML = "";
      if (data["WatchTime Promotion"]) {
        const promo = data["WatchTime Promotion"].toString().trim().toLowerCase();
        promotionHTML = promo === "yes"
          ? `<span class="badge-green">WatchTime Promotion Is On</span>`
          : `<span class="badge-red">WatchTime Promotion Stopped</span>`;
      }

      container.innerHTML = `
        <div class="playlist-tile">
          <h3>Member Info</h3>
           <p><strong>Username:</strong> ${data.Username}</p>
          <p><strong>Channel Name:</strong> ${data["Channel Name"]}</p>
          <p><strong>Channel Handle:</strong> ${data["Channel Handle"]}</p>
          <p><strong>Playlist Pending Work:</strong> ${data["Playlist Pending Work"]}</p>
          <p><strong>Playlist Pending By Others:</strong> ${data["Playlist Pending By Others"]}</p>
           <p><strong>Total Playlist Watch:</strong> ${data["Total Playlists Watch"]}</p>
          <p><strong>Last Time Work:</strong> ${data["Last Time Work"]}</p>
          ${promotionHTML}
        </div>`;
    })
    .catch(() => container.innerHTML = "<p style='color:red;'>Error loading member info.</p>");
};

// ---------- Logout ----------
document.getElementById("logoutBtn").addEventListener("click", () => {
  localStorage.removeItem("channelHandle");
  window.location.href = HOME_URL;
});

// ---------- Login ----------
document.getElementById("loginBtn").addEventListener("click", () => {
  window.location.href = LOGIN_URL;
});
</script>

</head>
</html>
